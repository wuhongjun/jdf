/* jdf-1.0.0/ tips.js Date:2015-05-14 11:28:55 */
!function(a){a.ui.define("tips",{options:{sourceTrigger:null,trigger:null,hasCssLink:!0,baseVersion:"1.0.0",cssLinkVersion:"1.0.0",tipsClass:"ui-tips",type:"hover",align:["top","left"],autoWindow:!0,autoResize:!0,hasArrow:!0,hasClose:!0,closeName:null,currClass:"",zIndex:100,onClose:null,diff:8,width:null,source:"",mouseenterHideAll:!0,mouseleaveDelayTime:500,mouseenterDelayTime:0,callback:function(){}},init:function(){var b=this;var c=this.options;if(this.create(),this.tips=a("#uis-tips-"+this.guid),this.bindTag=!0,"fixed"==c.type){var d=b.options.trigger?b.el.find(b.options.trigger):b.el;this.setInit(d)}if("hover"==c.type){var e=function(){clearTimeout(b.mouseleave)};var f=function(){b.mouseleave=setTimeout(function(){b.hide()},c.mouseleaveDelayTime)};var g=function(){var d=a(this);clearTimeout(b.mouseenter),e(),b.mouseenter=setTimeout(function(){b.hideAll(),b.setInit(d)},c.mouseenterDelayTime)};b.options.trigger?(b.el.delegate(c.trigger,"mouseenter",g),b.el.delegate(c.trigger,"mouseleave",f)):(b.el.bind("mouseenter",g),b.el.bind("mouseleave",f)),b.tips.bind("mouseenter",e),b.tips.bind("mouseleave",f)}if("click"==c.type){var h=function(){b.setInit(a(this))};b.options.trigger?b.el.delegate(c.trigger,"mouseup",h):b.el.bind("mouseup",h)}},showBindEvent:function(b){var c=b.data;var d=b.target;var e=c.options.trigger?c.el.find(c.options.trigger):c.el;a(d).is(e)||a(d).parents().is(e)||a(d).is(".ui-tips")||a(d).parents(".ui-tips").is(".ui-tips")||!a(".ui-tips:visible").length||c.hide()},show:function(){this.tips.show();var b=this.options.trigger?this.el.find(this.options.trigger):this.el;b.addClass(this.options.currClass),a(document).bind("click",this,this.showBindEvent)},hide:function(){this.tips.hide();var b=this.options.trigger?this.el.find(this.options.trigger):this.el;b.removeClass(this.options.currClass),this.options.onClose&&this.options.onClose.call(null,b,this.tips),a(document).unbind("click",this,this.showBindEvent)},hideAll:function(){this.options.mouseenterHideAll&&(a(".ui-tips").hide(),a("."+this.options.tipsClass).hide())},setInit:function(b){var c="";var d=this.options.source;var e=this.options.sourceTrigger;c=e?a(e).html():d?d:b.attr("data-tips"),c&&(this.tips.find(".ui-tips-main").html(c),this.update(b),this.show(),this.bindTag&&this.bind(),this.options.callback.call(this.tips.find(".ui-tips-main"),b,this.tips))},bind:function(){var b=this;var c=this.options;if(b.tips.find(".ui-tips-close").bind("click",function(){b.hide()}),a(b.tips.find(b.options.closeName)).live("click",function(){b.hide()}),c.autoResize){var d=this.options.trigger?this.el.find(this.options.trigger):this.el;a(window).bind("resize",function(){b.update(d)}),a.browser.msie||a(window).scroll(function(){b.update(d)})}this.bindTag=!1},create:function(){var b=this.options;var c="";var d=b.zIndex+this.guid;b.hasArrow&&(c='<span class="ui-tips-arrow" style="z-index:'+d+'"></span>');var e="";this.options.hasClose&&(e='<span class="ui-tips-close" style="z-index:'+d+'">x</span>');var f=['<div class="'+b.tipsClass+' ui-tips-top" style="display:none;z-index:'+d+'" id="uis-tips-'+this.guid+'">','	<div class="ui-tips-main">',"	</div>",c,e,"</div>"].join("");if("fixed"==b.type){var g=this.options.trigger?this.el.find(this.options.trigger):this.el;a(f).appendTo(g)}else a(f).appendTo("body")},update:function(a){var b=this.options;this.align(b.align[0],b.align[1],a)},align:function(b,c,d){var e=this.options;var f=e.diff;var g=d.offset();var h=d.outerWidth(!0);var i=d.outerHeight(!0);var j=g.top;var k=g.left;var l=this.tips;var m="ui-tips ui-tips-top";var n=e.width||l.outerWidth();var o=e.height||l.outerHeight();-1!=a.inArray(b,["top","bottom","left","right"])&&(m="ui-tips ui-tips-"+b),-1!=a.inArray(c,["top","bottom","left","right","center"])&&(("top"==b||"bottom"==b)&&(k+n>a.page.clientWidth()&&e.autoWindow&&(c="right"),n>k&&e.autoWindow&&(c="left"),j-o-f<a(document).scrollTop()&&e.autoWindow&&(b="top",m="ui-tips ui-tips-"+b),j+o+i+f>a(document).scrollTop()+a.page.clientHeight()&&e.autoWindow&&(b="bottom",m="ui-tips ui-tips-"+b),m+=" ui-tips-x-"+c,"top"==b&&(j=j+i+f),"bottom"==b&&(j=j-o-f),"left"==c&&(k=k),"center"==c&&(k=k-n/2+h/2),"right"==c&&(k=k-n+h)),("left"==b||"right"==b)&&(k+n+h+f>a.page.clientWidth()&&e.autoWindow&&(b="right",m="ui-tips ui-tips-"+b),n>k&&e.autoWindow&&(b="left",m="ui-tips ui-tips-"+b),j-o+i+f<a(document).scrollTop()&&e.autoWindow&&(c="top"),j+o-f>a(document).scrollTop()+a.page.clientHeight()&&e.autoWindow&&(c="bottom"),m+=" ui-tips-y-"+c,"left"==b&&(k=k+h+2*f),"right"==b&&(k=k-n-f),"top"==c&&(j=j-i+f),"center"==c&&(j=j-o/2+i),"bottom"==c&&(j=j-o+i/2+2*f))),"ui-tips"!=this.options.tipsClass&&(m+=" "+this.options.tipsClass),l.attr("class",m),l.css({top:j,left:k}),e.width&&l.css({width:e.width})}})}(jQuery);
